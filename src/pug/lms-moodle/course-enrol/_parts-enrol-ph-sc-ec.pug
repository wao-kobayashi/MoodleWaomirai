//教科データを取得
include ../_subject_data.pug

// セクション1: 今月の授業
section.enrol-section
  h2.enrol-title 4月の授業
  // 各教科の授業情報を表示
  each subject in subjects[enrolpage.category]
    .enrol-section-basesubject-thismonth-lesson-grid
      // レベル情報を表示
      .enrol-section-basesubject-thismonth-lesson-grid-level
        // レベル名
        .enrol-section-basesubject-thismonth-lesson-grid-level-main= subject.level 
        // 対象学年
        .enrol-section-basesubject-thismonth-lesson-grid-level-sub= subject.grade 

      // 各レッスン情報を表示
      each lesson in subject.lessons
        .enrol-section-basesubject-thismonth-lesson-grid-lesson
          // レッスンの週
          .enrol-section-basesubject-thismonth-lesson-grid-lesson-week= lesson.week 
          .enrol-section-basesubject-thismonth-lesson-grid-lesson-banner
            img(src=lesson.banner)
          // レッスン説明
          .enrol-section-basesubject-thismonth-lesson-grid-lesson-text= lesson.text 


// セクション2: 年間の授業カリキュラム
section.enrol-section
  h2.enrol-title 年間の授業カリキュラム
  .enrol-section-basesubject-year-lesson
    // レベルごとのタブ部分
    .enrol-section-basesubject-year-lesson-tab 
       .enrol-section-basesubject-year-lesson-tab-child#tab-level-1 
          |レベル1(小1~小4)
       .enrol-section-basesubject-year-lesson-tab-child#tab-level-2
          |レベル2(小5~小6)
       .enrol-section-basesubject-year-lesson-tab-child#tab-level-3 
          |レベル3(中学生)
       .enrol-section-basesubject-year-lesson-tab-child#tab-level-4 
          |レベル4(高校生)
    // カリキュラム内容を表示
    .enrol-section-basesubject-year-lesson-content
      //以下はstaticのデータ
      each level, levelName in curriculum[enrolpage.category]
        .enrol-section-basesubject-year-lesson-content-child(id="content-" + levelName)
          each item in level
            .enrol-section-basesubject-year-lesson-content-child-curriculum
              .enrol-section-basesubject-year-lesson-content-child-curriculum-month
                // 月
                span.month=  item.month
                | 月
              .enrol-section-basesubject-year-lesson-content-child-curriculum-detail
                // カリキュラムのタイトル
                .enrol-section-basesubject-year-lesson-content-child-curriculum-detail-title= item.title 
                  .enrol-section-basesubject-year-lesson-content-child-curriculum-detail-subcontent= item.subcontents1
                  .enrol-section-basesubject-year-lesson-content-child-curriculum-detail-subcontent= item.subcontents2
                  .enrol-section-basesubject-year-lesson-content-child-curriculum-detail-subcontent= item.subcontents3
// セクション3: 時間割
section.enrol-section
  h2.enrol-title 時間割
  //以下はstaticのデータ
  .enrol-section-basesubject-timetable
    .enrol-section-basesubject-timetable-head
     .enrol-section-basesubject-timetable-head-child
       |時間
     .enrol-section-basesubject-timetable-head-child
       |日
     .enrol-section-basesubject-timetable-head-child
       |月
     .enrol-section-basesubject-timetable-head-child
       |火
     .enrol-section-basesubject-timetable-head-child
       |水
     .enrol-section-basesubject-timetable-head-child
       |木 
     .enrol-section-basesubject-timetable-head-child
       |金
     .enrol-section-basesubject-timetable-head-child
       |土
    each slot in timeslots[enrolpage.category]
      .enrol-section-basesubject-timetable-content
        // 時間帯の開始時刻と終了時刻を表示
        .enrol-section-basesubject-timetable-content-child
          // 開始時刻
          .enrol-section-basesubject-timetable-content-child-start= slot.time.split(' - ')[0] 
          // 終了時刻
          .enrol-section-basesubject-timetable-content-child-end= slot.time.split(' - ')[1] 
        
        // 各曜日のスケジュールを表示
        each daySchedule in slot.schedule
          .enrol-section-basesubject-timetable-content-child(class= daySchedule.subject ? 'active' : '')
            if daySchedule.subject
              // 科目名
              .enrol-section-basesubject-timetable-content-child-subject= daySchedule.subject
              // レベル
              .enrol-section-basesubject-timetable-content-child-level= daySchedule.level 
            else
              | - 

// セクション4: 年間の開催スケジュール
section.enrol-section
  h2.enrol-title 年間の開催スケジュール
  p|ここにgoogleカレンダー

// セクション5: 受講費
section.enrol-section.coursedetail-info
  .coursedetail-info-inner
    h2.enrol-title 受講費用

    //----- 授業コース -----
    .box-container
      //----- 受講費用 -----
      .coursedetail-info-fee
        p.coursedetail-info-fee-price
          span.price ¥6,600
          span.small-text /月(税込)

        .coursedetail-info-fee-benefits
          .grid-child ✔︎入会金無料
          .grid-child ✔︎当月配信される哲学の授業への参加
          .grid-child ✔小3~高校生までの全ての授業
          .grid-child ✔︎課題の提出
          .grid-child ✔︎前月配信のアーカイブ授業の視聴
          .grid-child ✔︎いつでも退会可能

// セクション6: 時間割
section.enrol-section
  h2.enrol-title 他の授業科目も見る
  p|ここは小林担当


// 必要なスクリプト
script.
  $(document).ready(function() {
    // タブのクリックイベント設定
    $('.enrol-section-basesubject-year-lesson-tab-child').click(function() {
      $('.enrol-section-basesubject-year-lesson-tab-child').removeClass('active'); // 他のタブを非アクティブ化
      $('.enrol-section-basesubject-year-lesson-content-child').hide(); // 他のコンテンツを非表示化
      $(this).addClass('active'); // クリックされたタブをアクティブ化
      var targetContentId = '#content-level' + $(this).attr('id').split('-')[2]; // 対応するコンテンツIDを取得
      $(targetContentId).show(); // 対応するコンテンツを表示
    });
    

    // 初期状態で最初のタブを選択
    $('.enrol-section-basesubject-year-lesson-tab-child:first').click();
  });
